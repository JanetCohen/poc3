<!doctype html>
<html>
<body>
<script>
(function () {
    function runOnce() {
        // 1. Buat backing store
        let buf = new ArrayBuffer(0x1000);

        // 2. Banyak view berbeda
        let u8  = new Uint8Array(buf);
        let u32 = new Uint32Array(buf);
        let f64 = new Float64Array(buf);

        // 3. Isi data awal
        for (let i = 0; i < u8.length; i++) {
            u8[i] = i & 0xff;
        }

        // 4. Akses silang (masih dalam batas!)
        let a = u32[1];
        let b = f64[1];

        // 5. Mutasi intensif
        for (let i = 0; i < 1000; i++) {
            u8[i % u8.length] ^= 0x41;
        }

        // 6. Observasi value (harus stabil secara teori)
        if (!Number.isFinite(b)) {
            console.log("Weird float detected:", b);
        }
    }

    // 7. Loop besar buat stress engine
    for (let i = 0; i < 50000; i++) {
        runOnce();
    }

    console.log("Done");
})();
</script>
</body>
</html>
